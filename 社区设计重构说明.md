# 社区页面设计说明

## 概述

社区采用**金融投资场景下的专业列表布局**：单列信息流、内容为主、用户与时间信息前置，配合中国红品牌色与清晰的操作区，贴合"赚了吗"的投资社交定位。

---

## 布局与卡片

### 整体布局

- **列表**：单列（LazyVStack），以时间倒序展示帖子。
- **重点**：用户信息 + 完整正文 + 话题标签，图片为辅助。
- **风格**：偏专业、可读性强，适合金融/投资类讨论。

### PostCard 结构

```swift
- 用户头像（渐变色）+ 用户名 + 时间
- 正文（最多 4 行）
- 话题标签（中国红主题）
- 操作栏（点赞、评论、分享）
- 中国红主题色、统一圆角与间距
```

---

## 设计特点

### 1. 专业金融风格

**视觉层次**
- 用户信息在顶部，建立信任感
- 内容为核心，支持更长的文字表达
- 操作栏分离，清晰的交互区域

**配色方案**
- 主色：中国红 `#DC143C`（品牌主色）
- 渐变头像：主红 → 深红
- 标签背景：品牌浅色（淡红）
- 卡片背景：系统次级背景色

### 2. 交互优化

**微动效**
- 动画轻量、时长 150ms 左右，避免干扰阅读
- 缓动：ease-out

**焦点管理**
- 发布页面自动聚焦输入框
- 输入框聚焦时显示红色边框
- 字数统计实时反馈（超限红色提示）

**无障碍支持**
- 遵循 `prefers-reduced-motion`
- 清晰的视觉层次
- 合理的触摸目标尺寸（最小 44pt）

### 3. 内容呈现

**文本优化**
- 行距：4pt（提升可读性）
- 限制行数：4行（保持卡片高度一致）
- 字体大小：15pt（舒适阅读）

**标签设计**
- 最多显示 3 个标签
- 红色文字 + 浅红背景
- 圆角胶囊形状
- 横向滚动支持更多标签

**时间显示**
- 相对时间格式（刚刚、5分钟前）
- 本地化（中文）
- 灰色辅助文字

---

## 发布页面优化

### 输入体验

**内容编辑器**
- 最小高度：180pt
- Placeholder 提示："今天市场怎么样？聊聊你的操作和想法..."
- 字数限制：500字（带实时统计）
- 聚焦时红色边框高亮

**标签功能**
- 快捷输入（空格分隔）
- 实时预览（显示解析后的标签）
- 视觉反馈（红色主题胶囊）

### 操作按钮

**发布按钮**
- 渐变背景（主红色）
- 图标 + 文字组合
- 禁用状态清晰（灰色）
- Loading 状态（白色进度条）

---

## 空状态设计

### 视觉元素

**图标**
- 大尺寸图标：`chart.line.uptrend.xyaxis`
- 渐变圆形背景（品牌色）
- 尺寸：120x120pt

**文案层次**
- 主标题："还没有交易心得"（20pt，粗体）
- 副标题："成为第一个分享投资见解的人"（15pt，常规）

**行动按钮**
- 渐变背景（主红 → 深红）
- 图标 + 文字："发布第一条心得"
- 圆角胶囊（25pt）
- 红色阴影（增强视觉吸引力）

---

## 技术实现

### 性能优化

1. **列表优化**
   - `LazyVStack` 延迟加载
   - 卡片高度动态计算
   - 图片异步加载（AsyncImage）

2. **动画性能**
   - 使用 SwiftUI 原生动画
   - 避免重度动画（符合金融场景）
   - 时长控制在 150-300ms

3. **状态管理**
   - `@StateObject` 管理 ViewModel
   - `@State` 管理局部状态
   - `@FocusState` 管理输入焦点

### 数据模型扩展

**Post 模型新增字段**
```swift
- commentCount: Int     // 评论数
- isLiked: Bool         // 当前用户是否已点赞
- createdAtDate: Date?  // 格式化的时间（可选）
```

---

## 设计系统应用

### 颜色使用

| 用途 | 颜色常量 | 值 |
|------|---------|-----|
| 主要操作 | `ColorPalette.brandPrimary` | #DC143C |
| 次要强调 | `ColorPalette.brandSecondary` | #B22222 |
| 标签背景 | `ColorPalette.brandLight` | #FFF5F5 |
| 卡片背景 | `ColorPalette.bgSecondary` | 系统自适应 |
| 主要文字 | `ColorPalette.textPrimary` | 系统自适应 |
| 次要文字 | `ColorPalette.textSecondary` | 系统自适应 |

### 间距规范

| 元素 | 间距 |
|------|-----|
| 卡片间距 | 12pt |
| 卡片外边距 | 16pt |
| 卡片内边距 | 12-16pt |
| 组件间距 | 8-12pt |

### 圆角规范

| 元素 | 圆角 |
|------|-----|
| 卡片 | 12pt |
| 按钮 | 12pt |
| 标签 | 12-14pt |
| 输入框 | 12pt |

---

## 用户体验提升

### 操作流程优化

**发布流程**
1. 点击"发布"按钮
2. 检查登录状态
   - 未登录：弹出登录提示
   - 已登录：打开发布页面
3. 自动聚焦输入框（0.5s 延迟）
4. 实时字数统计
5. 实时标签预览
6. 点击"发布心得"提交

**浏览体验**
- 下拉刷新更新内容
- 上滑自动加载更多
- 点击卡片进入帖子详情
- 点赞即时反馈

### 视觉反馈

**交互状态**
- Loading：进度指示器
- Error：Alert / 文案提示

**动画反馈**
- 点赞：心形图标填充（红色）
- 发布成功：卡片淡入
- 刷新：系统原生动画

---

## 可访问性

### 遵循 iOS HIG

1. **动态字体**
   - 支持系统字体缩放
   - 使用系统标准字号

2. **颜色对比度**
   - 文字对比度 ≥ 4.5:1
   - 交互元素对比度 ≥ 3:1

3. **触摸目标**
   - 最小尺寸：44x44pt
   - 操作按钮间距合理

4. **动画控制**
   - 尊重 `prefers-reduced-motion`
   - 动画可选禁用

---

## 后续优化方向

### 短期（MVP+）

1. **图片支持**
   - 集成图片上传（CloudBase 云存储）
   - 图片缓存机制
   - 多图展示（横向滚动）

2. **评论功能**
   - 评论列表
   - 评论输入
   - 评论点赞

3. **详情页面**
   - 点击卡片进入详情
   - 展示完整内容
   - 评论区交互

### 中期

1. **个性化**
   - 关注用户
   - 个性化推荐
   - 热门排序

2. **富文本**
   - 股票代码高亮（$茅台）
   - 话题标签跳转
   - @用户提醒

3. **互动增强**
   - 转发功能
   - 收藏功能
   - 举报机制

### 长期

1. **社区治理**
   - 内容审核
   - 用户等级
   - 勋章系统

2. **数据分析**
   - 阅读量统计
   - 互动率分析
   - 热度算法

---

## 总结

社区设计围绕**专业投资内容**与**中国红品牌**展开：

- **单列列表**：信息流清晰，便于逐条阅读与讨论。
- **内容为主**：正文与用户信息前置，图片为补充。
- **中国红主题**：主色、标签、按钮统一品牌视觉。
- **交互清晰**：操作区明确，支持点赞、评论、分享。
- **可访问性**：遵循 iOS HIG，支持动态字体与合理触摸区域。

整体风格适配金融投资场景下的心得分享与深度讨论，突出可信、易读。

---

**设计师**: AI Assistant  
**开发者**: leacent song  
**版本**: v2.0  
**更新日期**: 2026-01-25
