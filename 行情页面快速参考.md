# è¡Œæƒ…é¡µé¢å¿«é€Ÿå‚è€ƒ

## ğŸ“ æ–‡ä»¶å¯¼èˆª

### æ•°æ®æ¨¡å‹
- `Models/MarketStats.swift` - å¸‚åœºç»Ÿè®¡
- `Models/HotStockType.swift` - æ¦œå•ç±»å‹

### æœåŠ¡å±‚
- `Services/Market/TencentFinanceAPI.swift` - APIå°è£…
- `Services/Market/MarketDataService.swift` - æ•°æ®æœåŠ¡
- `Services/Market/MarketDataCache.swift` - ç¼“å­˜æœåŠ¡

### è§†å›¾å±‚
- `Views/Market/MarketView.swift` - ä¸»é¡µé¢
- `Views/Market/Components/MarketOverviewCard.swift` - å¸‚åœºæ€»è§ˆ
- `Views/Market/Components/QuickActionsView.swift` - å¿«æ·åŠŸèƒ½
- `Views/Market/Components/HotStocksView.swift` - çƒ­é—¨æ¦œå•
- `Views/Market/Components/TrendingTopicsView.swift` - çƒ­ç‚¹è¯é¢˜

### ViewModel
- `ViewModels/MarketViewModel.swift` - çŠ¶æ€ç®¡ç†

---

## ğŸ¯ æ ¸å¿ƒAPI

### è…¾è®¯è´¢ç»API

```
URL: http://qt.gtimg.cn/q={codes}
ç¤ºä¾‹: http://qt.gtimg.cn/q=s_sh000001,s_sz399001
ç¼–ç : GBKï¼ˆè‡ªåŠ¨è½¬UTF-8ï¼‰
è¶…æ—¶: 10ç§’
ç¼“å­˜: 5ç§’
```

### ä¸»è¦æŒ‡æ•°ä»£ç 

```swift
s_sh000001  // ä¸Šè¯æŒ‡æ•°
s_sz399001  // æ·±è¯æˆæŒ‡
s_sz399006  // åˆ›ä¸šæ¿æŒ‡
```

---

## ğŸ”§ å¿«é€Ÿæµ‹è¯•

```swift
// 1. æµ‹è¯•APIè¯·æ±‚
let service = MarketDataService.shared
let indices = try await service.fetchIndices()
print(indices)

// 2. æµ‹è¯•ç¼“å­˜
let cache = MarketDataCache.shared
cache.setCachedIndices(indices)
let cached = cache.getCachedIndices()

// 3. æµ‹è¯•ViewModel
let vm = MarketViewModel()
await vm.loadMarketData()
print(vm.indices)
print(vm.marketStats)
```

---

## âš ï¸ å¾…å®ç°åŠŸèƒ½

### P0ï¼ˆå¿…é¡»ï¼‰
- [ ] çƒ­é—¨æ¦œå•çœŸå®æ•°æ®
- [ ] å¸‚åœºç»Ÿè®¡çœŸå®æ•°æ®
- [ ] ç¤¾åŒºè¯é¢˜èšåˆ
- [ ] æ‰“å¡ç»Ÿè®¡äº‘å‡½æ•°

### P1ï¼ˆé‡è¦ï¼‰
- [ ] æœç´¢è‚¡ç¥¨
- [ ] è‡ªé€‰æŒä¹…åŒ–
- [ ] å¿«æ·åŠŸèƒ½è·³è½¬

---

## ğŸ¨ è®¾è®¡token

```swift
// é¢œè‰²
ColorPalette.brandPrimary     // #DC143C ä¸­å›½çº¢
ColorPalette.brandSecondary   // #B22222 æ·±çº¢
ColorPalette.brandLight       // #FFF5F5 æ·¡çº¢
ColorPalette.tradingUp        // çº¢è‰²ï¼ˆæ¶¨ï¼‰
ColorPalette.tradingDown      // ç»¿è‰²ï¼ˆè·Œï¼‰

// é—´è·
16pt  // å¡ç‰‡å¤–è¾¹è·
16pt  // å¡ç‰‡å†…è¾¹è·
12pt  // ç»„ä»¶é—´è·

// åœ†è§’
12pt  // å¤§å¡ç‰‡
8pt   // å°ç»„ä»¶
16pt  // æ ‡ç­¾

// å­—å·
48pt  // èµšé’±æ¯”ä¾‹
18pt  // æŒ‡æ•°ç‚¹ä½
15pt  // æ ‡é¢˜
13-14pt // æ­£æ–‡
12pt  // è¾…åŠ©
```

---

## ğŸ’¡ å¿«é€Ÿä¿®æ”¹

### ä¿®æ”¹ç¼“å­˜æ—¶é•¿
```swift
// MarketDataCache.swift
private let cacheTimeout: TimeInterval = 5 // æ”¹ä¸º10ç§’
```

### ä¿®æ”¹æ¦œå•æ˜¾ç¤ºæ•°é‡
```swift
// HotStocksView.swift
ForEach(Array(stocks.prefix(10)...)) // æ”¹ä¸º20
```

### ä¿®æ”¹APIè¶…æ—¶
```swift
// MarketDataService.swift
config.timeoutIntervalForRequest = 10 // æ”¹ä¸º15ç§’
```

---

## ğŸ“ æ•…éšœæ’æŸ¥

### æ•°æ®ä¸æ˜¾ç¤º
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯æ—¥å¿—
3. éªŒè¯APIè¿”å›æ ¼å¼
4. æ£€æŸ¥GBKç¼–ç è½¬æ¢

### åˆ·æ–°ä¸å·¥ä½œ
1. æ£€æŸ¥isRefreshingçŠ¶æ€
2. éªŒè¯async/awaitè°ƒç”¨
3. æŸ¥çœ‹ç¼“å­˜æ˜¯å¦æ¸…é™¤

### æ€§èƒ½é—®é¢˜
1. æ£€æŸ¥å¹¶è¡ŒåŠ è½½æ˜¯å¦ç”Ÿæ•ˆ
2. éªŒè¯ç¼“å­˜å‘½ä¸­ç‡
3. æŸ¥çœ‹å†…å­˜å ç”¨

---

**å¿«é€Ÿè”ç³»**: æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£
- `è¡Œæƒ…é¡µé¢å®ç°æ–‡æ¡£.md`
- `è¡Œæƒ…é¡µé¢è®¾è®¡å¯¹æ¯”.md`
- `è¡Œæƒ…é¡µé¢å®Œæˆæ€»ç»“.txt`
